<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AgroShield - AI Diagnosis</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='styles.css') }}"
    />
    <style>
      /* Specialized styles for the Modern Dashboard Page */
      .dashboard-grid {
        display: grid;
        grid-template-columns: 1fr 2fr;
        gap: 2rem;
        margin-top: 80px; /* Space for fixed nav */
        padding: 2rem;
        max-width: var(--max-width);
        margin-left: auto;
        margin-right: auto;
      }

      .upload-card,
      .result-card {
        background: white;
        padding: 2rem;
        border-radius: 15px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.05);
        border: 1px solid #e1f0e1;
      }

      .drop-zone {
        border: 2px dashed var(--primary-color);
        border-radius: 10px;
        padding: 3rem;
        text-align: center;
        transition: 0.3s;
        background: var(--extra-light);
        cursor: pointer;
      }

      .drop-zone:hover {
        background: #d9fbd6;
      }

      .status-badge {
        display: inline-block;
        padding: 5px 15px;
        border-radius: 20px;
        background: var(--secondary-color);
        color: white;
        font-size: 0.8rem;
        margin-bottom: 1rem;
      }

      @media (max-width: 768px) {
        .dashboard-grid {
          grid-template-columns: 1fr;
          margin-top: 60px;
        }
      }
    </style>
  </head>
  <body>
    <nav class="nav">
      <div class="nav__content">
        <div class="logo">
          <a href="/">AGROSHIELD</a>
        </div>
        <div class="nav__links">
          <a href="#" class="logout-button">Dashboard</a>
          <a
            href="{{ url_for('logout') }}"
            class="logout-button"
            style="background: transparent; color: var(--text-dark)"
            >Logout</a
          >
        </div>
      </div>
    </nav>

    <main class="dashboard-grid">
      <section class="upload-card">
        <span class="status-badge">AI Ready</span>
        <h2>New Diagnosis</h2>
        <p class="description">
          Upload a clear photo of the plant leaf to start the analysis.
        </p>

        <form
          action="{{ url_for('predict') }}"
          method="post"
          enctype="multipart/form-data"
        >
          <div style="margin: 1.5rem 0">
            <input
              type="file"
              name="file"
              accept="image/*"
              required
              style="
                width: 100%;
                padding: 1rem;
                border: 2px dashed var(--primary-color);
                border-radius: 10px;
              "
            />
          </div>
          <button
            type="submit"
            class="hire__me"
            style="width: 100%; margin-top: 1.5rem"
          >
            Run AI Detection
          </button>
        </form>
      </section>

      <section class="result-card">
        <h2>System Instructions</h2>
        <div
          class="outer1"
          style="
            flex-direction: column;
            align-items: flex-start;
            text-align: left;
            margin: 1rem 0;
          "
        >
          <div class="info">
            <i
              class="fa-solid fa-circle-check"
              style="color: var(--primary-color)"
            ></i>
            <p>Ensure lighting is bright and natural.</p>
          </div>
          <div class="info" style="margin-top: 1rem">
            <i
              class="fa-solid fa-circle-check"
              style="color: var(--primary-color)"
            ></i>
            <p>Focus specifically on the affected areas of the leaf.</p>
          </div>
        </div>
        <div
          style="
            background: #f9fff9;
            border-left: 4px solid var(--primary-color);
            padding: 1rem;
            margin-top: 2rem;
          "
        >
          <p>
            <strong>Note:</strong> This AI model is trained on over 70,295
            agricultural samples to provide 98.32% accuracy.
          </p>
        </div>
      </section>
    </main>

    <footer id="footer" style="margin-top: 4rem">
      <p class="un">Copyright &#169; 2024 AgroShield. All Rights Reserved.</p>
    </footer>

    <script>
      function updateFileName(input) {
        const name = input.files[0]?.name || "No file chosen";
        document.getElementById("file-name").textContent = "Selected: " + name;
      }

      document.querySelector("form").addEventListener("submit", function (e) {
        const fileInput = document.getElementById("upload");
        if (!fileInput.files || fileInput.files.length === 0) {
          e.preventDefault();
          alert("Please select an image first!");
        }
      });
    </script>
  </body>
</html>
